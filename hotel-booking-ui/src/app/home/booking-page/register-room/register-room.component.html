@if (showDetails) {
    <app-room-details [room]="this.room()" (detailsCloseEventEmitter)="closeDetailsEvent()"></app-room-details>
}
<div class="bg-gray-200 w-full mt-20"></div>
<div class="bg-gray-200 border-b-2 border-gray-300 w-full h-[100px]">
    <div class="grid grid-cols-3 justify-items-center mx-24">
        <div class="grid grid-cols-1 justify-items-center">
            <a [routerLink]="['/booking/search-room']" class="group flex items-center pt-5 hover:cursor-pointer">
                <div class=" h-0.5 w-[150px] bg-lime-700 group-hover:bg-lime-500"></div>
                <p class="mx-3 bg-lime-500 group-hover:bg-lime-400 px-3 py-1 rounded-full">1</p>
                <div class="h-0.5 w-[180px] bg-lime-700 group-hover:bg-lime-500"></div>
            </a>
            <p class="mr-7 mt-3">Choice Of Date</p>
        </div>
        <div class="grid grid-cols-1 justify-items-center">
            <a [routerLink]="['/booking/room-list']" class=" group flex items-center pt-5">
                <div class="h-0.5 w-[150px] bg-lime-700 group-hover:bg-lime-500"></div>
                <p class="mx-3 bg-lime-500 px-3 py-1 rounded-full group-hover:bg-lime-400">2</p>
                <div class="h-0.5 w-[180px] bg-lime-700 group-hover:bg-lime-500"></div>
            </a>
            <p class="mr-5 mt-3">Choice Of Room</p>
        </div>
        <div class="grid grid-cols-1 justify-items-center">
            <div class="flex items-center pt-5">
                <div class="h-0.5 w-[150px] bg-lime-700"></div>
                <p class="mx-3 bg-lime-500 px-3 py-1 rounded-full">3</p>
                <div class="h-0.5 w-[150px] bg-lime-700"></div>
            </div>
            <p class="mt-3">Book Room</p>
        </div>
    </div>
</div>
<div class="mt-[4rem]">
    <div class="grid grid-cols-3 justify-items-center">
        <div class="w-4/6 col-span-2 p-8 bg-white">
            <h2 class="text-2xl font-bold mb-4">Booking Form</h2>
            <form (submit)="regiesterGuestAndBookRoom()" #bookForm="ngForm" class="space-y-4">
                <div>
                    <label for="firstName" class="block text-sm font-medium text-gray-700">First Name</label>
                    <input #firstName="ngModel" [(ngModel)]="guest().firstName" type="text" id="firstName" name="firstName" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                    @if (firstName.touched && firstName.errors?.['required']) {
                        <small class="text-red-600">Firstname is required!</small>
                    }
                </div>
                <div>
                    <label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label>
                    <input #lastName="ngModel" [(ngModel)]="guest().lastName" type="text" id="lastName" name="lastName" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                    @if (lastName.touched && lastName.errors?.['required']) {
                        <small class="text-red-600">Lastname is required!</small>
                    }
                </div>
                <div>
                    <label for="birthDate" class="block text-sm font-medium text-gray-700">Birth Date</label>
                    <input #birthDate="ngModel" [(ngModel)]="guest().birthDate" type="date" id="birthDate" name="birthDate" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                    @if (birthDate.touched && birthDate.errors?.['required']) {
                        <small class="text-red-600">BirthDate is required!</small>
                    }
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
                    <input #email="ngModel" [(ngModel)]="guest().email" type="email" id="email" name="email" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                    @if (email.touched && email.errors?.['required']) {
                        <small class="text-red-600">Email address is required!</small>
                    }
                </div>
                <div>
                    <label for="phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                    <input #phone="ngModel" [(ngModel)]="guest().phone" type="tel" id="phone" name="phone" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                    @if (phone.touched && phone.errors?.['required']) {
                        <small class="text-red-600">Phone number is required!</small>
                    }
                </div>
                <div>
                    <label for="street" class="block text-sm font-medium text-gray-700">Street</label>
                    <input #street="ngModel" [(ngModel)]="guest().address.street" type="text" id="street" name="street" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                    @if (street.touched && street.errors?.['required']) {
                        <small class="text-red-600">Street name is required!</small>
                    }
                </div>
                <div>
                    <label for="city" class="block text-sm font-medium text-gray-700">City</label>
                    <input #city="ngModel" [(ngModel)]="guest().address.city" type="text" id="city" name="city" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                    @if (city.touched && city.errors?.['required']) {
                        <small class="text-red-600">City name is required!</small>
                    }
                </div>
                <div>
                    <label for="country" class="block text-sm font-medium text-gray-700">Country</label>
                    <input #country="ngModel" [(ngModel)]="guest().address.country" type="text" id="country" name="country" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                    @if (country.touched && country.errors?.['required']) {
                        <small class="text-red-600">Country name is required!</small>
                    }
                </div>
                <div>
                    <label for="status" class="block mb-2 text-sm text-gray-900">Extra Bed</label>
                    <select [(ngModel)]="extraBedCount" (change)="changePrice()" [ngModelOptions]="{standalone: true}" id="status" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-200 dark:border-gray-600 dark:placeholder-gray-400 dark:text-black dark:focus:ring-blue-500 dark:focus:border-blue-500">
                        <option [value]="0">0</option>
                        <option [value]="1">1</option>
                    </select>
                </div>
                <div>
                    <button [disabled]="bookForm.invalid" type="submit" class="w-full bg-blue-500 text-white p-2 rounded-md">Book</button>
                </div>
            </form>
        </div>

        <div class="w-full h-3/6 border-4 rounded-2xl shadow-2xl bg-gray-100 mr-24 mt-20">
            <div class="grid grid-cols-1">
                <div class="mb-5">
                    <img (click)="showDetailsEvent()" class="w-[500px] h-[150px] border-4 shadow-xl border-gray-200 rounded-xl mb-2 cursor-pointer hover:scale-105" src="/assets/room-detail/{{room().roomType}}-{{room().occupation}}-room/{{room().roomType}}-{{room().occupation}}.jpg" height="150px" alt="">
                </div>

                <p class="text-sm text-blue-500 mx-3 pl-10"> <i class="fa-solid fa-circle-info"></i> Click room photo for view more about room.</p>
                <div class="relative bg-transparent overflow-hidden">
                    <table class="table-auto w-full text-left">
                        <tbody class="text-gray-500">
                            <tr class="py-5">
                                <td class="py-5 font-bold p-4">check-in Date</td>
                                <td class="font-bold pl-3">:</td>
                                <td class="py-5 font-bold p-4 text-end"><input class="bg-transparent" type="date" value="{{checkinDate}}" disabled></td>
                            </tr>
                            <tr class="py-5">
                                <td class="py-5 font-bold p-4">check-out Date</td>
                                <td class="font-bold pl-3">:</td>
                                <td class="py-5 font-bold p-4 text-end"><input type="date" value="{{checkoutDate}}" disabled></td>
                            </tr>
                            <tr class="py-5">
                                <td class="py-5 mr-10 font-bold p-4" >Total Price</td>
                                <td class="font-bold pl-3">:</td>
                                <td class="py-5 font-bold p-4 pl-14"><span>$ {{totalPrice}}</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                 
            </div>
        </div>
    </div>
</div>